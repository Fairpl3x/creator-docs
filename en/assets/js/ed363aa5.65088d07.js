"use strict";(self.webpackChunkVRChat_Creator_Docs=self.webpackChunkVRChat_Creator_Docs||[]).push([[8289],{42019:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>l,contentTitle:()=>d,default:()=>h,frontMatter:()=>s,metadata:()=>i,toc:()=>a});var o=r(74848),t=r(28453);const s={title:"String Loading",slug:"string-loading",excerpt:"Load text files from the internet in your VRChat worlds",hidden:!1,createdAt:"2023-02-07T01:10:57.067Z",updatedAt:"2023-03-26T00:35:05.784Z"},d="Trusted URLs",i={id:"worlds/udon/string-loading",title:"String Loading",description:"String Loading allows you to download text files from the internet and use them in your VRChat world. You can either use the DownloadString script included in the SDK, or you can make your own script using the new VRCStringDownloader.LoadUrl function.",source:"@site/docs/worlds/udon/string-loading.md",sourceDirName:"worlds/udon",slug:"/worlds/udon/string-loading",permalink:"/creator-docs-i18n/en/worlds/udon/string-loading",draft:!1,unlisted:!1,editUrl:"https://github.com/FairplexVR/creator-docs/edit/main/Docs/docs/worlds/udon/string-loading.md",tags:[],version:"current",lastUpdatedBy:"github-actions[bot]",lastUpdatedAt:1711582340,formattedLastUpdatedAt:"Mar 27, 2024",frontMatter:{title:"String Loading",slug:"string-loading",excerpt:"Load text files from the internet in your VRChat worlds",hidden:!1,createdAt:"2023-02-07T01:10:57.067Z",updatedAt:"2023-03-26T00:35:05.784Z"},sidebar:"tutorialSidebar",previous:{title:"Input Events",permalink:"/creator-docs-i18n/en/worlds/udon/input-events"},next:{title:"Udon Moderation Tool Guidelines",permalink:"/creator-docs-i18n/en/worlds/udon/udon-moderation-tool-guidelines"}},l={},a=[{value:"Using the <code>DownloadString</code> script to download a string",id:"using-the-downloadstring-script-to-download-a-string",level:2},{value:"Create your own script for LoadUrl",id:"create-your-own-script-for-loadurl",level:2},{value:"New events",id:"new-events",level:2},{value:"OnStringLoadSuccess",id:"onstringloadsuccess",level:3},{value:"OnStringLoadError",id:"onstringloaderror",level:3},{value:"New types",id:"new-types",level:2},{value:"VRCStringDownloader",id:"vrcstringdownloader",level:3},{value:"VRCStringDownloader.LoadUrl",id:"vrcstringdownloaderloadurl",level:4},{value:"IVRCStringDownload",id:"ivrcstringdownload",level:3},{value:"Example Code",id:"example-code",level:3}];function c(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(n.p,{children:["String Loading allows you to download text files from the internet and use them in your VRChat world. You can either use the ",(0,o.jsx)(n.code,{children:"DownloadString"})," script included in the SDK, or you can make your own script using the new ",(0,o.jsx)(n.code,{children:"VRCStringDownloader.LoadUrl"})," function."]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["Your text files can be in any format, such as ",(0,o.jsx)(n.code,{children:".txt"})," or ",(0,o.jsx)(n.code,{children:".json"}),"."]}),"\n"]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"One string can be downloaded every five seconds.\nIf this limit is exceeded, string downloads are queued and downloaded in a random order."}),"\n",(0,o.jsx)(n.li,{children:"One string can only be of a maximum of 100MB"}),"\n",(0,o.jsx)(n.li,{children:"You can only have 1000 elements in the queue"}),"\n"]}),"\n",(0,o.jsx)(n.h1,{id:"trusted-urls",children:"Trusted URLs"}),"\n",(0,o.jsx)(n.p,{children:"If a site is not on the list, it will not download unless \u2018Allow Untrusted URLs\u2019 has been enabled in the user\u2019s settings."}),"\n",(0,o.jsx)(n.p,{children:"The following URLs are available:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["GitHub (",(0,o.jsx)(n.code,{children:"*.github.io"}),")"]}),"\n",(0,o.jsxs)(n.li,{children:["Pastebin (",(0,o.jsx)(n.code,{children:"pastebin.com"}),")"]}),"\n",(0,o.jsxs)(n.li,{children:["Github Gist (",(0,o.jsx)(n.code,{children:"gist.githubusercontent.com"}),")"]}),"\n"]}),"\n",(0,o.jsx)(n.h1,{id:"guides",children:"Guides"}),"\n",(0,o.jsxs)(n.h2,{id:"using-the-downloadstring-script-to-download-a-string",children:["Using the ",(0,o.jsx)(n.code,{children:"DownloadString"})," script to download a string"]}),"\n",(0,o.jsx)(n.p,{children:"The SDK includes a script to download strings easily:"}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsx)(n.li,{children:"Create a new GameObject in your scene."}),"\n",(0,o.jsxs)(n.li,{children:["Add an ",(0,o.jsx)(n.code,{children:"UdonBehaviour"})," component."]}),"\n",(0,o.jsxs)(n.li,{children:["Select ",(0,o.jsx)(n.code,{children:"DownloadString"})," as the program source."]}),"\n",(0,o.jsx)(n.li,{children:"Enter the URL and select the text component where you'd like to display the downloaded text."}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"create-your-own-script-for-loadurl",children:"Create your own script for LoadUrl"}),"\n",(0,o.jsxs)(n.p,{children:["You can use the function ",(0,o.jsx)(n.code,{children:"VRCStringDownloader.LoadUrl"})," to download Strings in your own graphs."]}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsxs)(n.li,{children:["Execute ",(0,o.jsx)(n.code,{children:"VRCStringDownloader.LoadUrl"})," with a URL and specify an UdonBehaviour."]}),"\n",(0,o.jsxs)(n.li,{children:["Wait for the ",(0,o.jsx)(n.code,{children:"OnStringLoadSuccess"})," or ",(0,o.jsx)(n.code,{children:"OnStringLoadError"})," event to be called on the specified UdonBehaviour."]}),"\n",(0,o.jsxs)(n.li,{children:["Use the event's ",(0,o.jsx)(n.code,{children:"IVRCStringDownload"})," to get the ",(0,o.jsx)(n.code,{children:"Result"})," of the string download."]}),"\n"]}),"\n",(0,o.jsx)(n.h1,{id:"new-udongraph-nodes",children:"New UdonGraph Nodes"}),"\n",(0,o.jsx)(n.h2,{id:"new-events",children:"New events"}),"\n",(0,o.jsx)(n.h3,{id:"onstringloadsuccess",children:"OnStringLoadSuccess"}),"\n",(0,o.jsxs)(n.p,{children:["Returns ",(0,o.jsx)(n.code,{children:"IVRCStringDownload"}),". Called when the function ",(0,o.jsx)(n.code,{children:"LoadUrl"})," has successfully downloaded the string from the internet."]}),"\n",(0,o.jsx)(n.h3,{id:"onstringloaderror",children:"OnStringLoadError"}),"\n",(0,o.jsxs)(n.p,{children:["Returns ",(0,o.jsx)(n.code,{children:"IVRCStringDownload"}),". Called when the function ",(0,o.jsx)(n.code,{children:"LoadUrl"})," has failed to download the string."]}),"\n",(0,o.jsx)(n.h2,{id:"new-types",children:"New types"}),"\n",(0,o.jsx)(n.h3,{id:"vrcstringdownloader",children:"VRCStringDownloader"}),"\n",(0,o.jsx)(n.p,{children:"Use this static class to download strings from the web."}),"\n",(0,o.jsx)(n.h4,{id:"vrcstringdownloaderloadurl",children:"VRCStringDownloader.LoadUrl"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Url"}),": the URL to load from the internet."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"UdonBehaviour"}),": the UdonBehaviour to send the events to.","\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"In Udon Graph, this defaults to the current UdonBehaviour"}),"\n",(0,o.jsxs)(n.li,{children:["In Udon Sharp, you can use ",(0,o.jsx)(n.code,{children:"(IUdonEventReceiver)this"})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"ivrcstringdownload",children:"IVRCStringDownload"}),"\n",(0,o.jsx)(n.p,{children:"Result from the string load events."}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsxs)(n.strong,{children:["Get Error (",(0,o.jsx)(n.code,{children:"string"}),")"]}),": The error message for ",(0,o.jsx)(n.code,{children:"OnStringLoadError"}),"."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsxs)(n.strong,{children:["Get ErrorCode (",(0,o.jsx)(n.code,{children:"int"}),")"]}),": The HTTP Error code for ",(0,o.jsx)(n.code,{children:"OnStringLoadError"}),"."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsxs)(n.strong,{children:["Get ResultBytes (",(0,o.jsx)(n.code,{children:"byte[]"}),")"]}),": The raw data that was downloaded as a byte array. You can use ",(0,o.jsx)(n.code,{children:"System.Text.Encoding"})," on this to decode a string in a custom format. Accessing this property will return a copy of the data."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsxs)(n.strong,{children:["Get Result (",(0,o.jsx)(n.code,{children:"string"}),")"]}),": The string that was downloaded, decoded via the UTF8 standard."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsxs)(n.strong,{children:["Get UdonBehaviour (",(0,o.jsx)(n.code,{children:"UdonBehaviour"}),")"]}),": The UdonBehaviour to which events are sent."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsxs)(n.strong,{children:["Get Url (",(0,o.jsx)(n.code,{children:"VRCUrl"}),")"]}),": Gets the URL from which the download was attempted."]}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"example-code",children:"Example Code"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-csharp",metastring:'title="String Download Example, Custom Text Encoding"',children:'using System.Text;\nusing UdonSharp;\nusing UnityEngine;\nusing VRC.SDK3.StringLoading;\nusing VRC.SDKBase;\nusing VRC.Udon.Common.Interfaces;\n\npublic class ResultBytesExample : UdonSharpBehaviour\n{\n    [SerializeField]\n    private VRCUrl url;\n\n    void Start()\n    {\n        VRCStringDownloader.LoadUrl(url, (IUdonEventReceiver)this);\n    }\n\n    public override void OnStringLoadSuccess(IVRCStringDownload result)\n    {\n        string resultAsUTF8 = result.Result;\n        byte[] resultAsBytes = result.ResultBytes;\n        string resultAsASCII = Encoding.ASCII.GetString(resultAsBytes);\n        Debug.Log($"UTF8: {resultAsUTF8}");\n        Debug.Log($"ASCII: {resultAsASCII}");\n    }\n\n    public override void OnStringLoadError(IVRCStringDownload result)\n    {\n        Debug.LogError($"Error loading string: {result.ErrorCode} - {result.Error}");\n    }\n}\n'})})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(c,{...e})}):c(e)}},28453:(e,n,r)=>{r.d(n,{R:()=>d,x:()=>i});var o=r(96540);const t={},s=o.createContext(t);function d(e){const n=o.useContext(s);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:d(e.components),o.createElement(s.Provider,{value:n},e.children)}}}]);